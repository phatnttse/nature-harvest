<app-header></app-header>
<app-breadcrumb></app-breadcrumb>
<form [formGroup]="profileForm" (ngSubmit)="saveChanges()">
  <div class="container">
    <div class="main-body">
      <div class="row">
        <div class="col-lg-6">
          <div class="card">
            <div class="card-body">
              <div class="d-flex flex-column align-items-center text-center">
                <div style="position: relative; display: inline-block">
                  <img
                    [src]="userResponse?.picture"
                    alt="Admin"
                    class="rounded-circle bg-primary"
                    width="110"
                    style="
                      display: block;
                      max-width: 100%;
                      min-height: 110px;
                      border-radius: 50%;
                      object-fit: cover;
                    "
                  />
                  <button
                    style="
                      position: absolute;
                      top: 80px;
                      right: 4px;
                      padding: 6px;
                      background-color: #0f0f0f;
                      cursor: pointer;
                      z-index: 1;
                    "
                    type="button"
                    (click)="uploadWidget()"
                    class="rounded-circle"
                  >
                    <i
                      class="fa-solid fa-image"
                      style="color: #fff; font-size: 20px"
                    ></i>
                  </button>
                </div>

                <div class="mt-3">
                  <h4>{{ userResponse?.name }}</h4>
                  <p class="mb-1 text-secondary">Khách hàng</p>
                  <p class="text-muted font-size-sm">
                    {{ userResponse?.email }}
                  </p>
                  <button
                    class="btn btn-primary"
                    style="padding: 0.8em 1.5em !important"
                  >
                    Đổi mật khẩu
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="card">
            <div class="card-body">
              <div class="section__content">
                <div class="fieldset">
                  <div class="field">
                    <div class="field__input-wrapper">
                      <label for="name" class="field__label"
                        >Họ và tên <span style="color: red"> *</span></label
                      >
                      <input
                        id="name"
                        type="text"
                        class="field__input"
                        formControlName="name"
                        required
                        [class.is-invalid]="
                          profileForm.get('name')!.invalid &&
                          profileForm.get('name')!.touched
                        "
                      />
                      @if(profileForm.get('name')!.invalid &&
                      profileForm.get('name')!.touched) {
                      <mat-error style="color: red">
                        Họ và tên là trường <strong>bắt buộc</strong>
                      </mat-error>
                      }
                    </div>
                  </div>

                  <div class="field">
                    <div class="field__input-wrapper">
                      <label for="phone" class="field__label">
                        Số điện thoại <span style="color: red"> *</span>
                      </label>
                      <input
                        id="phone"
                        type="tel"
                        class="field__input"
                        required
                        formControlName="phone"
                        [class.is-invalid]="
                          profileForm.get('phone')!.invalid &&
                          profileForm.get('phone')!.touched
                        "
                      />

                      @if (profileForm.get('phone')?.hasError('pattern')) {
                      <div class="error-message mt-2">
                        <mat-error
                          >Số điện thoại phải có đúng 10 chữ số</mat-error
                        >
                      </div>
                      }
                    </div>
                  </div>

                  <div class="field">
                    <div class="field__input-wrapper">
                      <label for="address" class="field__label">
                        Địa chỉ<span style="color: red"> *</span>
                      </label>
                      <input
                        id="address"
                        type="text"
                        class="field__input"
                        required
                        formControlName="address"
                        [class.is-invalid]="
                          profileForm.get('address')!.invalid &&
                          profileForm.get('address')!.touched
                        "
                      />
                      @if (profileForm.get('address')?.hasError('minlength')) {
                      <div class="error-message mt-2">
                        <mat-error>Địa chỉ phải ít nhất 10 ký tự </mat-error>
                      </div>

                      }
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mt-4">
                <div class="col-sm-9 col-lg-12 text-center">
                  <input
                    type="button"
                    (click)="saveChanges()"
                    class="btn btn-primary px-5"
                    style="padding: 0.75em 1.5em !important"
                    value="Lưu thay đổi"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>

<app-footer></app-footer>
